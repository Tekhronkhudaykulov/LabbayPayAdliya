import{l as E,r as v,u as P,a as w,c as n,A,j as t}from"./index-2c8e8237.js";import{A as I}from"./assets-8ecff1c4.js";import{L as D}from"./view-0a6af2b1.js";import{T as a}from"./view-305a4ff1.js";import{F as _}from"./view-2370f222.js";import{u as $}from"./useCustomPost-ccc383b8.js";import{m as k,e as B}from"./endpoints-a705306d.js";import{N as O}from"./view-0e859999.js";import"./button-389252e4.js";const j=E("http://localhost:5555"),T={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeInOut"}}},R=()=>{var r,m,p;const[l,u]=v.useState(0),i=localStorage.getItem("device_id"),d=P(),{responseData:s,setResponseData:c,clearForm:N,setError:g,error:b}=w();v.useEffect(()=>{n.post(`http://localhost:5555/cash/api/CashDevice/StartDevice?deviceID=${i}`).then(()=>(j.on("add-cash",e=>{const o=((e==null?void 0:e.value)||0)/100;u(x=>{const h=x+o;return c(f=>({...f,vendorForm:{...f.vendorForm,static_amount:h}})),h})}),()=>{j.off("add-cash")}))},[]);const{mutate:y,isPending:S,isError:F}=$({onSuccess:async e=>{c(e),await N(),c(e==null?void 0:e.labbay_transaction_id),d(`${A.SUCCESS}`)},onError:e=>{var o,x;g((x=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:x.message)}}),C=()=>{y({endpoint:B.createPay,body:s==null?void 0:s.vendorForm})};return t.jsxs(t.Fragment,{children:[F&&t.jsx(O,{message:b,onClose:""}),S?t.jsx(D,{}):t.jsxs(t.Fragment,{children:[t.jsxs(k.div,{className:"grid grid-cols-[60%_1fr] gap-[20px]",initial:"hidden",animate:"visible",variants:T,children:[t.jsxs("div",{className:"bg-content p-[20px] rounded-[36px] overflow-y-scroll",children:[t.jsxs("div",{className:"flex items-center justify-between gap-x-[20px] bg-white rounded-[12px] p-[10px]",children:[t.jsx("img",{src:(r=s==null?void 0:s.vendor)==null?void 0:r.logo,className:"min-w-[88px] w-[88px] h-[88px] rounded-full object-contain",alt:""}),t.jsx(a,{text:(m=s==null?void 0:s.vendor)==null?void 0:m.name,className:"text-[32px] font-bold"})]}),t.jsx("div",{className:"flex flex-col gap-[15px] mt-[10px]",children:(p=s==null?void 0:s.vendorInfo)==null?void 0:p.map((e,o)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-[25px] font-[500]",children:e.label}),t.jsx("div",{className:"text-[25px] font-[bold] ml-auto text-right",children:e.value})]},o))})]}),t.jsxs("div",{className:"flex flex-col gap-y-[10px]",children:[t.jsxs("div",{className:"bg-content p-[20px] rounded-[36px]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(a,{text:"Минимум:",className:"text-[25px] font-[500]"}),t.jsx(a,{text:"1 000 сум",className:"ml-auto text-right text-[25px] font-[bold]"})]}),t.jsx("div",{className:"h-[2px] bg-[#0BA859] my-[10px]"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(a,{text:"Максимум:",className:"text-[25px] font-[500]"}),t.jsx(a,{text:"200 000 сум",className:"ml-auto text-right text-[25px] font-[bold]"})]})]}),t.jsxs("div",{className:"bg-content p-[20px] rounded-[36px]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(a,{text:"Введено:",className:"text-[25px] font-[500]"}),t.jsx(a,{text:`${l} сум`,className:"ml-auto text-right text-[25px] font-[bold]"})]}),t.jsx("div",{className:"h-[2px] bg-[#0BA859] my-[10px]"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(a,{text:"К зачислению:",className:"text-[25px] font-[500]"}),t.jsx(a,{text:"0 сум",className:"ml-auto text-right text-[25px] font-[bold]"})]}),t.jsx("div",{className:"h-[2px] bg-[#0BA859] my-[10px]"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(a,{text:"Комиссия:",className:"text-[25px] font-[500]"}),t.jsx(a,{text:"0 сум",className:"ml-auto text-right text-[25px] font-[bold]"})]})]}),t.jsx("img",{src:I.Money,className:"mx-auto mt-8",alt:""})]})]}),t.jsx(_,{prevClick:()=>{n.post(`http://localhost:5555/cash/api/CashDevice/StopDevice?deviceID=${i}`).then(()=>{d(-1)})},showPrevButton:l>=900,nextDisabled:l<=900,nextClick:()=>{n.post(`http://localhost:5555/cash/api/CashDevice/StopDevice?deviceID=${i}`).then(()=>{C()})}})]})]})},Q=()=>t.jsx("div",{className:"flex flex-col h-full font-poppins",children:t.jsx(R,{})});export{Q as default};
